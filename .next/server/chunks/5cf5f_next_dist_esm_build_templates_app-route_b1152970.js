module.exports=[59705,e=>{"use strict";var t=e.i(44221),a=e.i(84471),i=e.i(71116),n=e.i(81063),r=e.i(6060),o=e.i(14024),l=e.i(48155),c=e.i(12038),s=e.i(71743),m=e.i(49332),d=e.i(28190),y=e.i(65348),u=e.i(52416),p=e.i(51577),h=e.i(97321),g=e.i(93695);e.i(65);var D=e.i(24916),v=e.i(44154);let E=[{id:"1",name:"Ahmed Al-Mansoori",email:"ahmed.almansoori@hamad.qa",phone:"+974-555-0101",role:"Senior Maintenance Technician"},{id:"2",name:"Fatima Al-Khalifa",email:"fatima.alkhalifa@hamad.qa",phone:"+974-555-0102",role:"Vehicle Maintenance Supervisor"},{id:"3",name:"Mohammed Al-Thani",email:"mohammed.althani@hamad.qa",phone:"+974-555-0103",role:"Aviation Maintenance Specialist"},{id:"4",name:"Sara Al-Sulaiti",email:"sara.alsulaiti@hamad.qa",phone:"+974-555-0104",role:"Medical Equipment Technician"},{id:"5",name:"Khalid Al-Mahmoud",email:"khalid.almahmoud@hamad.qa",phone:"+974-555-0105",role:"Fleet Manager"}],C=[{name:"Engine Oil System",type:"engine",intervalDays:90,criticality:"high",location:"Engine Bay"},{name:"Transmission Fluid",type:"transmission",intervalDays:180,criticality:"high",location:"Under Vehicle"},{name:"Brake Pads",type:"brakes",intervalDays:120,criticality:"critical",location:"Wheel Assemblies"},{name:"Brake Fluid",type:"brakes",intervalDays:365,criticality:"high",location:"Brake Reservoir"},{name:"Battery",type:"battery",intervalDays:180,criticality:"medium",location:"Engine Bay"},{name:"Air Filter",type:"engine",intervalDays:150,criticality:"medium",location:"Engine Bay"},{name:"Cabin Air Filter",type:"air_conditioning",intervalDays:180,criticality:"low",location:"Under Dashboard"},{name:"Tires",type:"tires",intervalDays:180,criticality:"high",location:"All Wheels"},{name:"Cooling System",type:"engine",intervalDays:365,criticality:"high",location:"Engine Bay"},{name:"Fuel Filter",type:"fuel_system",intervalDays:300,criticality:"medium",location:"Under Vehicle"},{name:"Spark Plugs",type:"engine",intervalDays:600,criticality:"medium",location:"Engine Bay"},{name:"Timing Belt",type:"engine",intervalDays:1200,criticality:"critical",location:"Engine Bay"},{name:"Suspension System",type:"landing_gear",intervalDays:365,criticality:"high",location:"Wheel Assemblies"},{name:"Exhaust System",type:"engine",intervalDays:365,criticality:"medium",location:"Under Vehicle"},{name:"Electrical System",type:"electrical",intervalDays:180,criticality:"medium",location:"Various"},{name:"Lighting System",type:"lighting",intervalDays:180,criticality:"low",location:"Exterior/Interior"},{name:"Wiper System",type:"electrical",intervalDays:180,criticality:"low",location:"Windshield"},{name:"Air Conditioning",type:"air_conditioning",intervalDays:180,criticality:"medium",location:"Engine Bay"},{name:"GPS/Navigation",type:"navigation",intervalDays:365,criticality:"low",location:"Dashboard"},{name:"Radio/Communication",type:"communication",intervalDays:180,criticality:"low",location:"Dashboard"}],w=[{name:"Engine System",type:"engine",intervalDays:90,criticality:"critical",location:"Engine Compartment"},{name:"Transmission",type:"transmission",intervalDays:180,criticality:"high",location:"Under Vehicle"},{name:"Brake System",type:"brakes",intervalDays:120,criticality:"critical",location:"Wheel Assemblies"},{name:"Emergency Lighting",type:"lighting",intervalDays:90,criticality:"critical",location:"Roof/Exterior"},{name:"Siren System",type:"communication",intervalDays:180,criticality:"critical",location:"Roof/Dashboard"},{name:"Medical Oxygen System",type:"medical_equipment",intervalDays:180,criticality:"critical",location:"Patient Compartment"},{name:"Defibrillator",type:"medical_equipment",intervalDays:365,criticality:"critical",location:"Patient Compartment"},{name:"Patient Monitor",type:"monitoring_systems",intervalDays:180,criticality:"critical",location:"Patient Compartment"},{name:"Ventilator",type:"medical_equipment",intervalDays:90,criticality:"critical",location:"Patient Compartment"},{name:"Stretcher System",type:"safety_equipment",intervalDays:365,criticality:"high",location:"Patient Compartment"},{name:"Air Conditioning",type:"air_conditioning",intervalDays:90,criticality:"high",location:"Cabin"},{name:"Battery System",type:"battery",intervalDays:180,criticality:"high",location:"Engine Compartment"},{name:"Tires",type:"tires",intervalDays:120,criticality:"high",location:"All Wheels"},{name:"Fuel System",type:"fuel_system",intervalDays:180,criticality:"medium",location:"Under Vehicle"},{name:"Electrical System",type:"electrical",intervalDays:180,criticality:"high",location:"Various"},{name:"GPS Tracking",type:"navigation",intervalDays:365,criticality:"medium",location:"Dashboard"},{name:"Radio Communication",type:"communication",intervalDays:90,criticality:"critical",location:"Dashboard"},{name:"Emergency Power Supply",type:"electrical",intervalDays:180,criticality:"critical",location:"Under Floor"},{name:"Safety Equipment",type:"safety_equipment",intervalDays:180,criticality:"high",location:"Various"},{name:"Cooling System",type:"engine",intervalDays:180,criticality:"medium",location:"Engine Compartment"}],R=[{name:"Main Rotor System",type:"rotor_system",intervalDays:90,criticality:"critical",location:"Main Rotor"},{name:"Tail Rotor System",type:"rotor_system",intervalDays:90,criticality:"critical",location:"Tail Rotor"},{name:"Engine System",type:"engine",intervalDays:50,criticality:"critical",location:"Engine Compartment"},{name:"Transmission System",type:"transmission",intervalDays:180,criticality:"critical",location:"Transmission Bay"},{name:"Avionics System",type:"avionics",intervalDays:180,criticality:"critical",location:"Cockpit"},{name:"Hydraulic System",type:"hydraulics",intervalDays:90,criticality:"critical",location:"Various"},{name:"Fuel System",type:"fuel_system",intervalDays:180,criticality:"high",location:"Fuel Tanks"},{name:"Electrical System",type:"electrical",intervalDays:90,criticality:"critical",location:"Various"},{name:"Landing Gear",type:"landing_gear",intervalDays:365,criticality:"high",location:"Undercarriage"},{name:"Emergency Systems",type:"emergency_systems",intervalDays:180,criticality:"critical",location:"Various"},{name:"Navigation System",type:"navigation",intervalDays:180,criticality:"high",location:"Cockpit"},{name:"Communication System",type:"communication",intervalDays:90,criticality:"critical",location:"Cockpit"},{name:"Medical Equipment",type:"medical_equipment",intervalDays:180,criticality:"high",location:"Cabin"},{name:"Monitoring Systems",type:"monitoring_systems",intervalDays:90,criticality:"high",location:"Cockpit"},{name:"Lighting System",type:"lighting",intervalDays:180,criticality:"medium",location:"Exterior"},{name:"Air Conditioning",type:"air_conditioning",intervalDays:90,criticality:"medium",location:"Cabin"},{name:"Battery System",type:"battery",intervalDays:180,criticality:"high",location:"Various"},{name:"Safety Equipment",type:"safety_equipment",intervalDays:180,criticality:"critical",location:"Various"},{name:"Fuel Monitoring",type:"monitoring_systems",intervalDays:90,criticality:"high",location:"Cockpit"},{name:"Vibration Monitoring",type:"monitoring_systems",intervalDays:60,criticality:"high",location:"Various"}];function f(e,t){let a=new Date;return t.map((t,i)=>{let n=new Date(a.getTime()-Math.random()*t.intervalDays*864e5),r=new Date(n.getTime()+24*t.intervalDays*36e5),o=r<a,l=!o&&r.getTime()-a.getTime()<6048e5,c="upcoming";return o?c="overdue":l&&(c="due"),{id:`${e}-device-${i+1}`,vehicleId:e,name:t.name,type:t.type,description:`${t.name} maintenance and inspection`,maintenanceIntervalDays:t.intervalDays,lastMaintenanceDate:n,nextMaintenanceDate:r,status:c,serialNumber:`SN-${e}-${i+1}`,manufacturer:"Various Manufacturers",model:`Model-${i+1}`,location:t.location,criticality:t.criticality,assignedContacts:[E[Math.floor(Math.random()*E.length)]]}})}let b=[{id:"car-1",name:"Charlie Response Car 1",type:"car",model:"Toyota Prado",licensePlate:"HMC-001",registrationNumber:"REG-001",status:"active",location:"Main Hospital Parking",assignedContacts:[E[1],E[4]],devices:f("car-1",C),purchaseDate:new Date("2022-01-15"),lastInspectionDate:new Date("2025-12-01"),nextInspectionDate:new Date("2026-06-01"),mileage:45e3,notes:"Primary emergency response vehicle"},{id:"car-2",name:"Charlie Response Car 2",type:"car",model:"Toyota Prado",licensePlate:"HMC-002",registrationNumber:"REG-002",status:"active",location:"Emergency Department",assignedContacts:[E[0],E[1]],devices:f("car-2",C),purchaseDate:new Date("2022-03-20"),lastInspectionDate:new Date("2025-11-15"),nextInspectionDate:new Date("2026-05-15"),mileage:38e3,notes:"Backup emergency response vehicle"},{id:"car-3",name:"Charlie Support Car 1",type:"car",model:"Toyota Prado",licensePlate:"HMC-003",registrationNumber:"REG-003",status:"active",location:"Administration Building",assignedContacts:[E[1],E[4]],devices:f("car-3",C),purchaseDate:new Date("2023-01-10"),lastInspectionDate:new Date("2025-12-15"),nextInspectionDate:new Date("2026-06-15"),mileage:25e3,notes:"Administrative and transport duties"},{id:"car-4",name:"Charlie Transport Car 1",type:"car",model:"Toyota Prado",licensePlate:"HMC-004",registrationNumber:"REG-004",status:"maintenance",location:"Maintenance Bay",assignedContacts:[E[0],E[1]],devices:f("car-4",C),purchaseDate:new Date("2022-08-05"),lastInspectionDate:new Date("2025-10-20"),nextInspectionDate:new Date("2026-04-20"),mileage:52e3,notes:"Currently undergoing scheduled maintenance"},{id:"car-5",name:"Charlie Transport Car 2",type:"car",model:"Toyota Prado",licensePlate:"HMC-005",registrationNumber:"REG-005",status:"active",location:"Medical Transport Bay",assignedContacts:[E[1],E[3]],devices:f("car-5",C),purchaseDate:new Date("2023-02-28"),lastInspectionDate:new Date("2025-12-10"),nextInspectionDate:new Date("2026-06-10"),mileage:28e3,notes:"Dedicated medical transport vehicle"},{id:"ambulance-1",name:"Ambulance Alpha 1",type:"ambulance",model:"Ford Transit",licensePlate:"AMB-001",registrationNumber:"AMB-REG-001",status:"active",location:"Emergency Department",assignedContacts:[E[0],E[3]],devices:f("ambulance-1",w),purchaseDate:new Date("2021-06-15"),lastInspectionDate:new Date("2025-12-05"),nextInspectionDate:new Date("2026-06-05"),mileage:65e3,notes:"Fully equipped ALS ambulance"},{id:"ambulance-2",name:"Ambulance Bravo 1",type:"ambulance",model:"Ford Transit",licensePlate:"AMB-002",registrationNumber:"AMB-REG-002",status:"active",location:"Ambulance Bay 1",assignedContacts:[E[1],E[3]],devices:f("ambulance-2",w),purchaseDate:new Date("2022-01-20"),lastInspectionDate:new Date("2025-11-25"),nextInspectionDate:new Date("2026-05-25"),mileage:48e3,notes:"BLS ambulance for routine transports"},{id:"ambulance-3",name:"Ambulance Alpha 2",type:"ambulance",model:"Ford Transit",licensePlate:"AMB-003",registrationNumber:"AMB-REG-003",status:"active",location:"Ambulance Bay 2",assignedContacts:[E[0],E[2]],devices:f("ambulance-3",w),purchaseDate:new Date("2021-09-10"),lastInspectionDate:new Date("2025-12-08"),nextInspectionDate:new Date("2026-06-08"),mileage:72e3,notes:"Critical care transport ambulance"},{id:"ambulance-4",name:"Ambulance Bravo 2",type:"ambulance",model:"Ford Transit",licensePlate:"AMB-004",registrationNumber:"AMB-REG-004",status:"maintenance",location:"Maintenance Facility",assignedContacts:[E[1],E[3]],devices:f("ambulance-4",w),purchaseDate:new Date("2022-04-15"),lastInspectionDate:new Date("2025-10-30"),nextInspectionDate:new Date("2026-04-30"),mileage:35e3,notes:"Specialized neonatal transport - in maintenance"},{id:"ambulance-5",name:"Ambulance Alpha 3",type:"ambulance",model:"Ford Transit",licensePlate:"AMB-005",registrationNumber:"AMB-REG-005",status:"active",location:"Emergency Response Station",assignedContacts:[E[0],E[1]],devices:f("ambulance-5",w),purchaseDate:new Date("2023-01-05"),lastInspectionDate:new Date("2025-12-12"),nextInspectionDate:new Date("2026-06-12"),mileage:29e3,notes:"Heavy rescue and extrication ambulance"},{id:"helicopter-1",name:"Air Ambulance 1",type:"helicopter",model:"Airbus H145",licensePlate:"HEL-001",registrationNumber:"HEL-REG-001",status:"active",location:"Helipad A",assignedContacts:[E[2],E[3]],devices:f("helicopter-1",R),purchaseDate:new Date("2020-08-20"),lastInspectionDate:new Date("2025-12-03"),nextInspectionDate:new Date("2026-06-03"),flightHours:1250,notes:"Primary air ambulance helicopter"},{id:"helicopter-2",name:"Medical Transport Helicopter 1",type:"helicopter",model:"AgustaWestland AW169",licensePlate:"HEL-002",registrationNumber:"HEL-REG-002",status:"active",location:"Helipad B",assignedContacts:[E[2],E[4]],devices:f("helicopter-2",R),purchaseDate:new Date("2021-11-30"),lastInspectionDate:new Date("2025-11-28"),nextInspectionDate:new Date("2026-05-28"),flightHours:890,notes:"Secondary medical transport helicopter"}];async function S(){let e,t,a=(e=[],t=new Date,b.forEach(a=>{a.devices.forEach(i=>{let n=Math.ceil((i.nextMaintenanceDate.getTime()-t.getTime())/864e5);(n<0||7===n||3===n||1===n)&&e.push({deviceId:i.id,vehicleId:a.id,equipmentName:i.name,vehicleName:a.name,daysUntilDue:n,nextMaintenanceDate:i.nextMaintenanceDate,contacts:i.assignedContacts.map(e=>({email:e.email,phone:e.phone,name:e.name})),priority:i.criticality})})}),e),i=0,n=0;for(let e of a)try{let t=e.daysUntilDue<0?`URGENT: Maintenance for ${e.equipmentName} on ${e.vehicleName} is ${Math.abs(e.daysUntilDue)} days overdue. Please schedule immediately.`:`Reminder: Maintenance for ${e.equipmentName} on ${e.vehicleName} is due ${0===e.daysUntilDue?"TODAY":`in ${e.daysUntilDue} day(s)`} on ${e.nextMaintenanceDate.toLocaleDateString()}.`;for(let a of e.contacts)(a.email||a.phone)&&(await fetch("/api/notifications/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contactName:a.name,email:a.email,phone:a.phone,message:t,subject:`Equipment Maintenance ${e.daysUntilDue<0?"OVERDUE":"Reminder"} - ${e.equipmentName}`,sendEmail:!!a.email,sendSMS:!!a.phone})}),i++)}catch(t){console.error(`Failed to send alert for ${e.equipmentName}:`,t),n++}return{sent:i,failed:n}}function A(){let e,t,a=(e=[],t=new Date,b.forEach(a=>{a.devices.forEach(i=>{let n=Math.ceil((i.nextMaintenanceDate.getTime()-t.getTime())/864e5);n<0?e.push({id:`alert-${i.id}-overdue`,deviceId:i.id,vehicleId:a.id,type:"overdue",message:`URGENT: Maintenance for ${i.name} on ${a.name} is ${Math.abs(n)} days overdue.`,priority:"critical"===i.criticality?"critical":"high",createdAt:t,acknowledged:!1}):n<=7&&n>=0&&e.push({id:`alert-${i.id}-due-soon`,deviceId:i.id,vehicleId:a.id,type:"due_soon",message:`Maintenance for ${i.name} on ${a.name} is due in ${n} days (${i.nextMaintenanceDate.toLocaleDateString()}).`,priority:"critical"===i.criticality?"high":"high"===i.criticality?"medium":"low",createdAt:t,acknowledged:!1})})}),e);return{total:a.length,overdue:a.filter(e=>"overdue"===e.type).length,dueSoon:a.filter(e=>"due_soon"===e.type).length,critical:a.filter(e=>"critical"===e.priority).length,high:a.filter(e=>"high"===e.priority).length,acknowledged:a.filter(e=>e.acknowledged).length,unacknowledged:a.filter(e=>!e.acknowledged).length}}async function M(e){try{let t=e.headers.get("authorization"),a=process.env.CRON_SECRET;if(a&&t!==`Bearer ${a}`)return v.NextResponse.json({error:"Unauthorized"},{status:401});let i=await S(),n=A();return v.NextResponse.json({success:!0,timestamp:new Date().toISOString(),alerts:{sent:i.sent,failed:i.failed},statistics:n})}catch(e){return console.error("Error sending automated alerts:",e),v.NextResponse.json({error:"Failed to send automated alerts",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function T(){try{let e=A();return v.NextResponse.json({success:!0,timestamp:new Date().toISOString(),statistics:e})}catch(e){return console.error("Error getting alert statistics:",e),v.NextResponse.json({error:"Failed to get alert statistics"},{status:500})}}e.s(["GET",()=>T,"POST",()=>M,"runtime",0,"nodejs"],5684);var x=e.i(5684);let N=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/alerts/automated/route",pathname:"/api/alerts/automated",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/OneDrive/Desktop/HMC tracker/src/app/api/alerts/automated/route.ts",nextConfigOutput:"",userland:x}),{workAsyncStorage:P,workUnitAsyncStorage:I,serverHooks:_}=N;function B(){return(0,i.patchFetch)({workAsyncStorage:P,workUnitAsyncStorage:I})}async function k(e,t,i){N.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/alerts/automated/route";v=v.replace(/\/index$/,"")||"/";let E=await N.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!E)return t.statusCode=400,t.end("Bad Request"),null==i.waitUntil||i.waitUntil.call(i,Promise.resolve()),null;let{buildId:C,params:w,nextConfig:R,parsedUrl:f,isDraftMode:b,prerenderManifest:S,routerServerContext:A,isOnDemandRevalidate:M,revalidateOnlyGenerated:T,resolvedPathname:x,clientReferenceManifest:P,serverActionsManifest:I}=E,_=(0,l.normalizeAppPath)(v),B=!!(S.dynamicRoutes[_]||S.routes[x]),k=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,f,!1):t.end("This page could not be found"),null);if(B&&!b){let e=!!S.routes[x],t=S.dynamicRoutes[_];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await k();throw new g.NoFallbackError}}let q=null;!B||N.isDev||b||(q="/index"===(q=x)?"/":q);let H=!0===N.isDev||!B,$=B&&!H;I&&P&&(0,o.setManifestsSingleton)({page:v,clientReferenceManifest:P,serverActionsManifest:I});let U=e.method||"GET",O=(0,r.getTracer)(),F=O.getActiveScopeSpan(),V={params:w,prerenderManifest:S,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:i.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,i,n)=>N.onRequestError(e,t,i,n,A)},sharedContext:{buildId:C}},G=new c.NodeNextRequest(e),L=new c.NodeNextResponse(t),j=s.NextRequestAdapter.fromNodeNextRequest(G,(0,s.signalFromNodeResponse)(t));try{let o=async e=>N.handle(j,V).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=O.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=a.get("next.route");if(i){let t=`${U} ${i}`;e.setAttributes({"next.route":i,"http.route":i,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${v}`)}),l=!!(0,n.getRequestMeta)(e,"minimalMode"),c=async n=>{var r,c;let s=async({previousCacheEntry:a})=>{try{if(!l&&M&&T&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let r=await o(n);e.fetchMetrics=V.renderOpts.fetchMetrics;let c=V.renderOpts.pendingWaitUntil;c&&i.waitUntil&&(i.waitUntil(c),c=void 0);let s=V.renderOpts.collectedTags;if(!B)return await (0,y.sendResponse)(G,L,r,V.renderOpts.pendingWaitUntil),null;{let e=await r.blob(),t=(0,u.toNodeOutgoingHttpHeaders)(r.headers);s&&(t[h.NEXT_CACHE_TAGS_HEADER]=s),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==V.renderOpts.collectedRevalidate&&!(V.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&V.renderOpts.collectedRevalidate,i=void 0===V.renderOpts.collectedExpire||V.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:V.renderOpts.collectedExpire;return{value:{kind:D.CachedRouteKind.APP_ROUTE,status:r.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:i}}}}catch(t){throw(null==a?void 0:a.isStale)&&await N.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:M})},!1,A),t}},m=await N.handleResponse({req:e,nextConfig:R,cacheKey:q,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:S,isRoutePPREnabled:!1,isOnDemandRevalidate:M,revalidateOnlyGenerated:T,responseGenerator:s,waitUntil:i.waitUntil,isMinimalMode:l});if(!B)return null;if((null==m||null==(r=m.value)?void 0:r.kind)!==D.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==m||null==(c=m.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",M?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,u.fromNodeOutgoingHttpHeaders)(m.value.headers);return l&&B||g.delete(h.NEXT_CACHE_TAGS_HEADER),!m.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,p.getCacheControlHeader)(m.cacheControl)),await (0,y.sendResponse)(G,L,new Response(m.value.body,{headers:g,status:m.value.status||200})),null};F?await c(F):await O.withPropagatedContext(e.headers,()=>O.trace(m.BaseServerSpan.handleRequest,{spanName:`${U} ${v}`,kind:r.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},c))}catch(t){if(t instanceof g.NoFallbackError||await N.onRequestError(e,t,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:M})},!1,A),B)throw t;return await (0,y.sendResponse)(G,L,new Response(null,{status:500})),null}}e.s(["handler",()=>k,"patchFetch",()=>B,"routeModule",()=>N,"serverHooks",()=>_,"workAsyncStorage",()=>P,"workUnitAsyncStorage",()=>I],59705)}];

//# sourceMappingURL=5cf5f_next_dist_esm_build_templates_app-route_b1152970.js.map