{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/musal/OneDrive/Desktop/HMC%20tracker/src/app/api/email/send/route.ts"],"sourcesContent":["\r\nimport { NextResponse } from 'next/server';\r\nimport nodemailer from 'nodemailer';\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { to, subject, html } = body;\r\n\r\n        // Check if SMTP credentials are configured\r\n        if (!process.env.SMTP_HOST) {\r\n            console.log('---------------------------------------------------');\r\n            console.log('ðŸ“§ [MOCK EMAIL SERVICE] - No SMTP Configured');\r\n            console.log(`To: ${to}`);\r\n            console.log(`Subject: ${subject}`);\r\n            console.log('---------------------------------------------------');\r\n            return NextResponse.json({ success: true, message: 'Email logged (Mock)' });\r\n        }\r\n\r\n        const transporter = nodemailer.createTransport({\r\n            host: process.env.SMTP_HOST,\r\n            port: Number(process.env.SMTP_PORT) || 587,\r\n            secure: process.env.SMTP_SECURE === 'true',\r\n            auth: {\r\n                user: process.env.SMTP_USER,\r\n                pass: process.env.SMTP_PASS,\r\n            },\r\n        });\r\n\r\n        await transporter.sendMail({\r\n            from: '\"HMC Fleet Commander\" <no-reply@hamad.qa>',\r\n            to,\r\n            subject,\r\n            html,\r\n        });\r\n\r\n        return NextResponse.json({ success: true });\r\n    } catch (error) {\r\n        console.error('Email Error:', error);\r\n        return NextResponse.json({ success: false, error: 'Failed to send email' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG;QAE9B,2CAA2C;QAC3C,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS,EAAE;YACxB,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,CAAC,IAAI,EAAE,IAAI;YACvB,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,SAAS;YACjC,QAAQ,GAAG,CAAC;YACZ,OAAO,uLAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,SAAS;YAAsB;QAC7E;QAEA,MAAM,cAAc,mMAAU,CAAC,eAAe,CAAC;YAC3C,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC3B,MAAM,OAAO,QAAQ,GAAG,CAAC,SAAS,KAAK;YACvC,QAAQ,QAAQ,GAAG,CAAC,WAAW,KAAK;YACpC,MAAM;gBACF,MAAM,QAAQ,GAAG,CAAC,SAAS;gBAC3B,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC/B;QACJ;QAEA,MAAM,YAAY,QAAQ,CAAC;YACvB,MAAM;YACN;YACA;YACA;QACJ;QAEA,OAAO,uLAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC7C,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,uLAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC9F;AACJ"}}]
}